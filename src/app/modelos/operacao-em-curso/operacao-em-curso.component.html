<div class="row wrapper">

  <div class="col-md-4 col-md-offset-4" style="float:left;">
    <div class="row">
      <div class="col-md-12">
        <form>
          <div class="form-group">
            <label class="control-label ">Nº da OF (Ordem de Fabrico)</label>
            <input class="form-control" value="{{of_num}}" type="text" readonly />
          </div>
          <div class="form-group">
            <label class="control-label requiredField" style="width: 100%; " for="email">Operação</label>
            <input style="font-size: 0.8rem;" class="form-control" value="{{op_num}}" type="text" [disabled]="true" />
          </div>
          <div class="form-group">
            <label class="control-label " for="subject">Máquina</label>
            <input style="font-size: 0.8rem;" class="form-control" value="{{maq_num}}" type="text" [disabled]="true" />
          </div>
          <div class="form-group">
            <label class="control-label ">Funcionário</label>
            <input [hidden]="modoedicao" style="font-size: 0.8rem;" class="form-control" value="{{id_utz}}" type="text"
              [disabled]="true" />
            <p-dropdown [hidden]="!modoedicao" [options]="utilizadores" [(ngModel)]="utz_lider" [ngModelOptions]="{standalone: true}"
              (onChange)="atualizaDados($event)" [style]="{'width':'100%'}"></p-dropdown>
          </div>
          <div class="col-md-12 col-md-offset-12 nopadding" style="padding-right: 0;">
            <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
              <div class="form-group">
                <label class="control-label ">Data Início</label>
                <input (ngModelChange)="atualizartempofunc('data_ini')" (change)="atualizartempofunc('data_ini')" style="display: -webkit-box; height: 44.4px;"
                  class="form-control" [(ngModel)]="data_ini" type="date" [ngModelOptions]="{standalone: true}"
                  [disabled]="disableEditar" />
              </div>
            </div>
            <div class="col-md-6 col-md-offset-6 col-sm-12  nopadding" style="float:left;padding: 0;">
              <div class="form-group">
                <label class="control-label ">Hora Início</label>
                <input (ngModelChange)="atualizartempofunc('hora_ini')" (change)="atualizartempofunc('hora_ini')" class="form-control"
                  [(ngModel)]="hora_ini" step='1' min="00:00:00" type="time" [ngModelOptions]="{standalone: true}"
                  [disabled]="disableEditar" style="display: -webkit-box; height: 44.4px;" />
              </div>
            </div>
          </div>
          <div class="col-md-12 col-md-offset-12 nopadding" style="padding-right: 0;">
            <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
              <div class="form-group">
                <label class="control-label ">Data Fim</label>
                <input (ngModelChange)="atualizartempofunc('data_fim')" (change)="atualizartempofunc('data_fim')"
                  [ngClass]="{'cor_trasparent': (data_fim == '' || data_fim == null) && !modoedicao}" class="form-control"
                  style="display: -webkit-box; height: 44.4px;" [(ngModel)]="data_fim" min="{{data_ini}}" type="date"
                  [ngModelOptions]="{standalone: true}" [disabled]="disableEditar" />
              </div>
            </div>
            <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding-right: 0px;">
              <div class="form-group">
                <label class="control-label ">Hora Fim</label>
                <input (ngModelChange)="atualizartempofunc('hora_fim')" (change)="atualizartempofunc('hora_fim')"
                  [ngClass]="{'cor_trasparent': (hora_fim == '' || hora_fim == null )&& !modoedicao}" class="form-control"
                  [(ngModel)]="hora_fim" style="display: -webkit-box; height: 44.4px;" step='1' min="00:00:00" type="time"
                  [ngModelOptions]="{standalone: true}" [disabled]="disableEditar" />
              </div>
              <button (click)="gravar_utilizadores()" [hidden]="!modoedicao || disableEditar" style="position: absolute; right: -29px; height: 44px; top: 24px; width: 42px;"
                pButton type="button" icon="fa-save" iconPos="left"></button>
            </div>
          </div>

          <form role="form" ngNativeValidate (ngSubmit)="gravar_preparacao()">
            <div [hidden]="!modoedicao" class="col-md-12 col-md-offset-12 nopadding" style="padding-right: 0;">
              <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
                <div class="form-group">
                  <label class="control-label ">Data Início Preparação</label>
                  <input (ngModelChange)="atualizartempofunc('data_ini_preparacao')" (change)="atualizartempofunc('data_ini_preparacao')"
                    style="display: -webkit-box; height: 44.4px;" class="form-control" [(ngModel)]="data_ini_preparacao"
                    type="date" [ngModelOptions]="{standalone: true}" [disabled]="disableEditar" [ngClass]="{'cor_trasparent': (data_ini_preparacao == '' || data_ini_preparacao == null ) && disableEditar}"
                    required />
                </div>
              </div>
              <div class="col-md-6 col-md-offset-6 col-sm-12  nopadding" style="float:left;padding: 0;">
                <div class="form-group">
                  <label class="control-label ">Hora Início Preparação</label>
                  <input (ngModelChange)="atualizartempofunc('hora_ini_preparacao')" (change)="atualizartempofunc('hora_ini_preparacao')"
                    class="form-control" [(ngModel)]="hora_ini_preparacao" type="time" [ngModelOptions]="{standalone: true}"
                    [disabled]="disableEditar" style="display: -webkit-box; height: 44.4px;" step='1' min="00:00:00"
                    [ngClass]="{'cor_trasparent': (hora_ini_preparacao == '' || hora_ini_preparacao == null ) && disableEditar}"
                    required />
                </div>
              </div>
            </div>

            <div [hidden]="!modoedicao" class="col-md-12 col-md-offset-12 nopadding" style="padding-right: 0;">
              <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
                <div class="form-group">
                  <label class="control-label ">Data Fim Preparação</label>
                  <input (ngModelChange)="atualizartempofunc('data_fim_preparacao')" (change)="atualizartempofunc('data_fim_preparacao')"
                    [ngClass]="{'cor_trasparent': (data_fim_preparacao== '' || data_fim_preparacao == null) && disableEditar }"
                    class="form-control" style="display: -webkit-box; height: 44.4px;" [(ngModel)]="data_fim_preparacao"
                    min="{{data_ini_preparacao}}" type="date" [ngModelOptions]="{standalone: true}" [disabled]="disableEditar"
                    required />
                </div>
              </div>
              <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding-right: 0px;">
                <div class="form-group">
                  <label class="control-label ">Hora Fim Preparação</label>
                  <input (ngModelChange)="atualizartempofunc('hora_fim_preparacao')" (change)="atualizartempofunc('hora_fim_preparacao')"
                    [ngClass]="{'cor_trasparent': (hora_fim_preparacao == '' || hora_fim_preparacao == null ) && disableEditar}"
                    class="form-control" [(ngModel)]="hora_fim_preparacao" style="display: -webkit-box; height: 44.4px;"
                    type="time" step='1' min="00:00:00" [ngModelOptions]="{standalone: true}" [disabled]="disableEditar"
                    required />
                </div>
                <button [hidden]="!modoedicao || disableEditar" style="position: absolute; right: -29px; height: 44px; top: 24px; width: 42px;"
                  pButton type="submit" icon="fa-save" iconPos="left"></button>
              </div>
            </div>
          </form>
          <button type="button" class="ui-button-warning" [hidden]="modoedicao " pButton (click)="displaypreparacao = true"
            label="Ver Preparação" style="height: 39px; display: -webkit-inline-box; top: 8px; margin-bottom: 9px; float: left; margin-right: 8px;"></button>
          <button type="button" class="ui-button-success" [hidden]="modoedicao || !verpausas" pButton (click)="pausas()"
            label="Ver Pausas" style="float: left; height: 39px; display: -webkit-box; top: 8px;"></button>
          <div [hidden]="!modoedicao && verpausas" class="col-md-12 col-md-offset-12 nopadding" style="padding-top: 10px; display: -webkit-box;">
            <!--<label class="control-label ">Estado</label>-->
            <p-dropdown [options]="estados_array" [style]="{'width':'200px'}" [(ngModel)]="estado_val" [ngModelOptions]="{standalone: true}"
              [hidden]="!modoedicao && verpausas" [disabled]="true"></p-dropdown>
            <button type="button" class="ui-button-success ui-button-raise" [hidden]="modoedicao && !disableEditar && verpausas"
              pButton (click)="pausas()" label="Ver Pausas" style="float: right; height: 39px; display: -webkit-box; left: 11px;"></button>

            <button type="button" class="ui-button-success" [hidden]="!modoedicao || disableEditar" pButton (click)="pausas_editar()"
              label="Editar Pausas" style="float: right; height: 39px;     margin-left: 15px;"></button>
          </div>
        </form>
      </div>
      <div class="col-md-12">
        <div *ngIf="utilizadores_adici?.length > 0">
          <b> Utilizadores Adicionais</b>
          <ul *ngFor="let ut of utilizadores_adici" style="margin-bottom: 4px;">
            <li style="    font-size: 0.7rem;">
              {{ut.label}}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-8 col-md-offset-8 nopadding" style="float:left;">
    <!--<div class="col-md-12 col-md-offset-12 nopadding" style="float:left; margin-bottom: 20px;">
      <button [disabled]="disabledAdici" type="button" class="ui-button-success" pButton routerLink="/registo-quantidades" label="REGISTO DE QUANTIDADES E DEFEITOS"
        style=" float:left; width: 100%; height: 70px;"></button>
    </div>-->
    <div class="col-md-12 col-md-offset-12 nopadding" style="float:left; margin-bottom: 20px;">
      <button [disabled]="disabledAdici" type="button" class="ui-button-success" pButton (click)="editarquantidades()"
        label="REGISTO DE QUANTIDADES E DEFEITOS" style=" float:left; width: 100%; height: 70px;"></button>
    </div>
    <div class="col-md-12 col-md-offset-12 nopadding" style="float:left;">
      <p-dataTable [loading]="loadingTable" [rowStyleClass]="lookupRowStyleClass" [value]="defeitos" class="tabelaref_of"
        dataKey="ref_num">
        <!--<p-header></p-header>-->
        <p-column [style]="{'width':'16%'}" field="ref_num" header="Código" [sortable]="true">
          <ng-template let-col let-x="rowData" pTemplate="body">
            <span [class.pecafinal]="!x['comp']">{{x[col.field]}}</span>
          </ng-template>
        </p-column>
        <p-column [style]="{'width':'5%'}" field="tipo" header="Tipo"></p-column>
        <p-column field="ref_des" header="Designação"></p-column>
        <p-column [style]="{'width':'7%'}" field="quant_of" header="Qtd. OF"></p-column>
        <p-column [style]="{'width':'8%'}" field="quant_boas" header="Qtd. Boas"></p-column>
        <p-column [style]="{'width':'10%'}" field="quant_def_total" header="Defeitos"></p-column>
        <p-column [style]="{'width':'10%'}" field="quant_control" header="Total Control">
          <ng-template let-col let-x="rowData" pTemplate="body">
            <div [style.background]="x['cor']">
              <span>{{x[col.field]}}</span>
            </div>
          </ng-template>
        </p-column>
      </p-dataTable>
      <button [hidden]="!permissao_ficheiroteste" type="button" icon="fa-refresh" class="ui-button-info" pButton
        (click)="atualizarreferencias()" label="Atualizar Referências" style="height: 41px; float: right; vertical-align: -webkit-baseline-middle;"></button>
    </div>
  </div>
  <div [hidden]="modoedicao" class="col-md-12 col-md-offset-12 nopadding" style="float:left; margin-top: 20px; text-align: center;">
    <button type="button" class="ui-button-danger" pButton (click)="cancelar()" label="CANCELAR / SAIR" style="float: none; width: 17%;vertical-align: -webkit-baseline-middle;"></button>
    <button type="button" icon="fa-envelope-o" class="ui-button-info" pButton (click)="mensagem()" label="MENSAGEM"
      style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [disabled]="concluido" type="button" class="ui-button-warning" pButton routerLink="/pausa" label="PAUSA"
      style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [disabled]="concluido || disabledAdici || maq_numcod == '000'" type="button" class="ui-button-secondary"
      pButton (click)="adicionaop()" label="ADICIONAR OPERADOR" style="float: none;  width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [disabled]="concluido || terminadisabled" type="button" class="ui-button-success ui-button-raise" pButton
      (click)="validaconclusao('C','O')" label="TERMINAR TRABALHO" style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>

    <!-- <button [disabled]="!concluido" type="button" class="ui-button-warning" pButton (click)="ficheiroteste()" label="TESTAR FICHEIRO" style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>-->
  </div>
  <div [hidden]="!modoedicao" class="col-md-12 col-md-offset-12 nopadding" style="float:left; margin-top: 20px; text-align: center;">
    <button type="button" class="ui-button-danger" pButton (click)="cancelar()" label="VOLTAR" style="float: none; width: 17%;vertical-align: -webkit-baseline-middle;"></button>
    <button [hidden]="!disableEditar" [disabled]="!permissao_editar" type="button" class="ui-button-warning" pButton
      (click)="editar()" label="EDITAR" style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [hidden]="disableEditar" [disabled]="!permissao_editar" type="button" class="ui-button-warning" pButton
      (click)="cancelaredicao()" label="CANCELAR EDIÇÃO" style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [disabled]="!permissao_editar || estado_val == 'A'" type="button" class="ui-button-danger" pButton (click)="eliminar()"
      label="ELIMINAR" style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
    <button [disabled]="disableEditar" type="button" class="ui-button-success" pButton (click)="gravar()" label="GRAVAR"
      style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>

    <button [hidden]="!permissao_ficheiroteste" type="button" class="ui-button-warning" pButton (click)="ficheiroteste('C',true,true)"
      label="Gerar Ficheiros Inic." style="float: none; width: 17%; vertical-align: -webkit-baseline-middle;"></button>
  </div>
</div>

<!--popup adicionar operador -->
<p-dialog header="ADICIONAR OPERADOR" [(visible)]="displayDialog" class="novoop" modal="modal" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group">
        <!-- <label class="control-label ">PIN DO UTILIZADOR</label>
        <input class="form-control" type="number" />-->
        <app-pagelogin></app-pagelogin>
      </div>
    </div>
  </div>
</p-dialog>

<!--popup adicionar operador -->
<p-dialog header="UTILIZADOR EM USO" [(visible)]="displayDialogutz" class="novoop" modal="modal" width="700"
  [responsive]="true" [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group">
        O Utilizador {{utilizador_insere}} já se encontra a executar esta OF!
      </div>
    </div>
  </div>
</p-dialog>

<!--popup adicionar operador em uso-->
<p-dialog header="UTILIZADOR EM USO" [(visible)]="displayDialogutz_em_uso" class="novoop" modal="modal" width="700"
  [responsive]="true" [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group">
        O Utilizador {{utilizador_insere}} já se encontra a executar outra OF, é necessário concluir a OF em Execução!
      </div>
    </div>
  </div>
</p-dialog>


<!--popup verificação-->
<p-dialog header="Verificação" [(visible)]="display_alerta_opnum" class="novoop" modal="modal" width="700" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="text-align: center;">
        {{texto_alerta}}
      </div>
    </div>
  </div>

  <p-footer>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <button style="float: none;" [hidden]="btdisabled" type="button" pButton (click)="display_alerta_opnum = false"
        label="OK"></button>
      <button style="float: none;" class="ui-button-success" (click)="editarGoTo()" [hidden]="btdisabled2" type="submit"
        pButton label="Continuar"></button>
      <button style="float: none;" class="ui-button-success" (click)="anularof()" [hidden]="btdisabled3" type="submit"
        pButton label="Continuar"></button>
    </div>
  </p-footer>
</p-dialog>

<!--popup adicionar operador em uso-->
<p-dialog header="UTILIZADORES ADICIONAIS COM TRABALHO POR CONCLUIR" [(visible)]="displayDialogLider" class="novoop"
  modal="modal" width="700" [responsive]="true" [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="padding: 20px;">
        Existem outros utilizadores adicionados ao trabalho. Eles deverão primeiro concluir o trabalho para que possa
        então concluir
        o seu!
        <br>
        <ul *ngFor="let ut of utilizadores_adici">
          <li>
            {{ut.label}}
          </li>
        </ul>
      </div>
    </div>
  </div>
</p-dialog>

<!--popup sem alterações -->
<p-dialog header="Sem Alterações" [(visible)]="displayalter" class="novoop" modal="modal" width="700" [responsive]="true"
  [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="padding: 22px 0 22px 0;">
        Não existem alterações para Gravar!
      </div>
    </div>
  </div>
</p-dialog>

<!-- POPUP MENSAGEM-->
<p-dialog [dismissableMask]="true" [(visible)]="displaymensagem" [closable]="false" class="mensagemdialog" modal="modal"
  [responsive]="true" width="700" [draggable]="false">
  <form (ngSubmit)="gravarmensagem()" ngNativeValidate>
    <div class="col-md-12 col-md-offset-12" style="float: left; font-size: 18px;">
      <div class="ui-grid-row">
        <div class="ui-grid-col-12">
          <label for="vin">Assunto</label>
        </div>
        <input type="text" pInputText size="100" placeholder="Assunto" class="form-control" [(ngModel)]="texto_assunto"
          [ngModelOptions]="{standalone: true}">
        <div class="ui-grid-col-12">
          <label for="vin">Texto Mensagem</label>
        </div>
        <textarea [required]="true" pInputTextarea autoResize="false" [rows]="5" style="width: 100%; resize: none;"
          [(ngModel)]="texto_mensagem" [ngModelOptions]="{standalone: true}"></textarea>
      </div>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
        <button type="button" class="ui-button-danger" pButton icon="fa-close" (click)="displaymensagem = false" label="Cancelar"></button>
        <button type="submit" pButton icon="fa-check" label="Gravar"></button>
      </div>
    </p-footer>
  </form>
</p-dialog>


<!--popup sem Pausas -->
<p-dialog header="Pausas" [(visible)]="displaypausas" class="novoop" modal="modal" width="800" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="padding: 22px 0 22px 0;">
        <p-dataTable [rowStyleClass]="lookupRowStyleClass" [value]="pausas_array" class="tabelaref_of" dataKey="id">
          <!--<p-header></p-header>-->
          <p-column [style]="{'width':'8%'}" field="datahora_ini" header="Data Inicio"></p-column>
          <p-column [style]="{'width':'8%'}" field="datahora_fim" header="Data Fim"></p-column>
          <p-column [style]="{'width':'10%'}" field="paragem" header="Tipo Pausa"></p-column>
          <p-column [style]="{'width':'8%'}" field="momento" header="Estado"></p-column>
        </p-dataTable>
      </div>
    </div>
  </div>
</p-dialog>

<p-confirmDialog header="Confirmação" width="425"></p-confirmDialog>

<p-growl [(value)]="msgs"></p-growl>
<p-growl class="pgrowlmsg" [(value)]="msgs2" [style]="{'width':'95%'}" [life]="6000"></p-growl>



<!--popup editar Pausas -->
<p-dialog header="Pausas" [(visible)]="displayeditarpausas" class="novoop" modal="modal" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false" (onShow)="onShow()" (onHide)="onHide()">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="padding: 22px 0 22px 0;">
        <form role="form" ngNativeValidate (ngSubmit)="gravar_pausas()">
          <p-dataTable class="tabelaeditarpausas" [rowStyleClass]="lookupRowStyleClass" [value]="pausas_array_editar"
            dataKey="id" scrollable="true" scrollHeight="50vh">
            <!--<p-header></p-header>-->
            <p-column [style]="{'width':'17%'}" field="data_ini" header="Data Inicio">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <button [disabled]="car['id'] != null " style="height: 32px; float: left;" class="ui-button-danger"
                  type="button" pButton icon="fa-trash" (click)="apagarlinha(car)"></button>
                <input class="form-control" style="display: -webkit-box; height: 32px; width: 86%; padding: 5px;"
                  [(ngModel)]="car[col.field]" type="date" [ngModelOptions]="{standalone: true}" max="{{car['data_fim']}}"
                  [hidden]="disableEditar" required />
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'12%'}" field="hora_ini" header="Hora Inicio">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <input class="form-control" style="display: -webkit-box; height: 32px; padding: 5px;" [(ngModel)]="car[col.field]"
                  step='1' min="00:00:00" type="time" [ngModelOptions]="{standalone: true}" [hidden]="disableEditar"
                  required />
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'17%'}" field="data_fim" header="Data Fim">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <input class="form-control" style="display: -webkit-box; height: 32px; padding: 5px;" [(ngModel)]="car[col.field]"
                  type="date" [ngModelOptions]="{standalone: true}" [hidden]="disableEditar" min="{{car['data_ini']}}"
                  required />
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'12%'}" field="hora_fim" header="Hora Fim">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <input class="form-control" style="display: -webkit-box; height: 32px; padding: 5px;" [(ngModel)]="car[col.field]"
                  step='1' min="00:00:00" type="time" [ngModelOptions]="{standalone: true}" [hidden]="disableEditar"
                  required />
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'14%'}" field="paragem" header="Tipo Pausa">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <p-dropdown appendTo="body" [required]="true" [(ngModel)]="car[col.field]" [ngModelOptions]="{standalone: true}"
                  [options]="pausa_nomes" [style]="{'width':'100%'}"></p-dropdown>
              </ng-template>
            </p-column>
            <p-column [style]="{'width':'8%'}" field="momento" header="Estado">
              <ng-template let-col let-car="rowData" pTemplate="body">
                <p-dropdown appendTo="body" [required]="true" [(ngModel)]="car[col.field]" [ngModelOptions]="{standalone: true}"
                  [options]="estados_pausa" [style]="{'width':'100%'}"></p-dropdown>
                <!-- [disabled]="data_ini_preparacao == null || data_ini_preparacao == '' "-->
              </ng-template>
            </p-column>
            <p-footer>
              <button class="ui-button-success" style="height: 44px;" pButton type="submit" icon="fa-save" iconPos="left"
                label="Gravar"></button>
              <button class="ui-button-warning" (click)="nova_pausas()" label="Nova Linha" style="height: 44px;"
                pButton type="button" icon="fa-plus" iconPos="left"></button>
              <button style="height: 44px;" class="ui-button-danger" type="button" pButton icon="fa-close" (click)="displayeditarpausas=false"
                label="Cancelar"></button>
            </p-footer>
          </p-dataTable>
        </form>
      </div>
    </div>
  </div>
</p-dialog>

<p-dialog header="Preparação" [(visible)]="displaypreparacao" class="novoop" modal="modal" width="800" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12 " style="padding-right: 0;">
    <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
      <div class="form-group">
        <label class="control-label ">Data Início Preparação</label>
        <input style="display: -webkit-box; height: 44.4px; background: #e8e6e6; width: 90%;" class="form-control"
          [(ngModel)]="data_ini_preparacao" type="date" [ngModelOptions]="{standalone: true}" [disabled]="true"
          [ngClass]="{'cor_trasparent': (data_ini_preparacao == '' || data_ini_preparacao == null ) && disableEditar}"
          required />
      </div>
    </div>
    <div class="col-md-6 col-md-offset-6 col-sm-12  nopadding" style="float:left;padding: 0;">
      <div class="form-group">
        <label class="control-label ">Hora Início Preparação</label>
        <input class="form-control" [(ngModel)]="hora_ini_preparacao" type="time" [ngModelOptions]="{standalone: true}"
          [disabled]="true" style="display: -webkit-box; height: 44.4px; background: #e8e6e6; width: 90%;" step='1' min="00:00:00"
          [ngClass]="{'cor_trasparent': (hora_ini_preparacao == '' || hora_ini_preparacao == null ) && disableEditar}"
          required />
      </div>
    </div>
  </div>

  <div class="col-md-12 col-md-offset-12 " style="padding-right: 0;">
    <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding: 0;">
      <div class="form-group">
        <label class="control-label ">Data Fim Preparação</label>
        <input [ngClass]="{'cor_trasparent': (data_fim_preparacao== '' || data_fim_preparacao == null) && disableEditar }"
          class="form-control" style="display: -webkit-box; height: 44.4px; background: #e8e6e6; width: 90%;"
          [(ngModel)]="data_fim_preparacao" min="{{data_ini_preparacao}}" type="date" [ngModelOptions]="{standalone: true}"
          [disabled]="true" required />
      </div>
    </div>
    <div class="col-md-6 col-md-offset-6 col-sm-12 nopadding" style="float:left; padding-right: 0px;">
      <div class="form-group">
        <label class="control-label ">Hora Fim Preparação</label>
        <input [ngClass]="{'cor_trasparent': (hora_fim_preparacao == '' || hora_fim_preparacao == null ) && disableEditar}"
          class="form-control" [(ngModel)]="hora_fim_preparacao" style="display: -webkit-box; height: 44.4px; background: #e8e6e6; width: 90%;"
          type="time" step='1' min="00:00:00" [ngModelOptions]="{standalone: true}" [disabled]="true" required />
      </div>
      <button [hidden]="!modoedicao || disableEditar" style="position: absolute; right: -29px; height: 44px; top: 24px; width: 42px;"
        pButton type="submit" icon="fa-save" iconPos="left"></button>
    </div>
  </div>
  <p-footer>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <button type="button" pButton icon="fa-close" (click)="displaypreparacao = false" label="Fechar"></button>
    </div>
  </p-footer>
</p-dialog>


<p-dialog header="Gerar Ficheiro" [(visible)]="displaygerarficheiros" class="novoop" modal="modal" [responsive]="true"
  [dismissableMask]="true" [dismissableMask]="true" [draggable]="false" (onShow)="onShow()" (onHide)="onHide()">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="padding: 22px 0 22px 0;">
        <button [disabled]="progressBarDialog" class="ui-button-success" (click)="ficheiroteste('C',true,false,true)"
          style="height: 44px;" pButton type="button" icon="fa-save" iconPos="left" label="DESCARREGAR FICHEIROS"></button>
        <button [disabled]="progressBarDialog" class="ui-button-warning" (click)="ficheiroteste('C',false,false,true)"
          label="GUARDAR PASTA DESTINO" style="height: 44px;" pButton type="button" icon="fa-folder" iconPos="left"></button>
      </div>
      <div *ngIf="progressBarDialog" class="load-wrapp">
        <div class="load-3">
          <div class="line"></div>
          <div class="line"></div>
          <div class="line"></div>
        </div>
      </div>
    </div>
  </div>
</p-dialog>

<!--popup alerta-->
<p-dialog header="Alerta" [closable]="false" [(visible)]="display_alerta" class="novoop" modal="modal" width="700"
  [responsive]="true" [dismissableMask]="true" [draggable]="false">
  <div class="col-md-12 col-md-offset-12" style="float: left;">
    <div class="ui-grid-row">
      <div class="form-group" style="text-align: center;">
        Trabalho já foi concluido!
      </div>
    </div>
  </div>
  <p-footer>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <button type="button" pButton icon="fa-close" routerLink="/home" label="OK"></button>
    </div>
  </p-footer>
</p-dialog>